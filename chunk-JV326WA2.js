import{Ba as b,Eb as p,Fb as y,Gb as m,J as g,M as l,S as a,Z as d,c as f,da as h,ea as i,f as v}from"./chunk-3MHY34XG.js";function w(n){n||(d(w),n=a(i));let e=new f(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(g(e))}function D(n,e){!e?.injector&&d(D);let t=e?.injector??a(h),s=new v(1),u=m(()=>{let r;try{r=n()}catch(c){y(()=>s.error(c));return}y(()=>s.next(r))},{injector:t,manualCleanup:!0});return t.get(i).onDestroy(()=>{u.destroy(),s.complete()}),s.asObservable()}function j(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&d(j);let s=t?e?.injector?.get(i)??a(i):null,u=k(e?.equal),r;e?.requireSync?r=b({kind:0},{equal:u}):r=b({kind:1,value:e?.initialValue},{equal:u});let c=n.subscribe({next:o=>r.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;r.set({kind:2,error:o})}});if(e?.requireSync&&r().kind===0)throw new l(601,!1);return s?.onDestroy(c.unsubscribe.bind(c)),p(()=>{let o=r();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new l(601,!1)}},{equal:e?.equal})}function k(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}export{w as a,D as b,j as c};
